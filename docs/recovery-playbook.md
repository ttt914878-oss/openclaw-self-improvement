# 失敗パターン→回復手順（1ページ）

- 対象: 1時間バッチ運用での詰まりを最短復旧するための標準手順

## 検知
- `scripts/hourly_batch_check.sh` の `CHECK=NG` を検知したら即対応
- 「実変更0件」「要約のみ」「成果物パス不明」を失敗シグナルとする
- 直近バッチ比で `1成果あたりコスト` が悪化したら要因調査を開始

## 初動
- まず実行範囲を固定（HEARTBEAT.md / backlog.md / 必要断片のみ）
- 失敗を1行で定義（何が未達か）
- 本バッチの必達を1つに絞る（実変更1件以上）

## 切り分け
- 原因を3分類: 入力過多 / 手順欠落 / 実装ギャップ
- 入力過多: 長文再読を止め、必要行だけ再取得
- 手順欠落: backlogのNOWに実行ステップを追記
- 実装ギャップ: ルールではなくスクリプト・設定を優先修正

## 回復
- 最小修正を即適用（ファイル1件の追加・更新）
- 期待挙動を1コマンドで確認（例: チェックスクリプト実行）
- 3行要約+pathで共有し、次アクションを1件だけ残す

## 再発防止
- 同種失敗の予防チェックをbacklog Ruleへ1行追加
- SESSION_SNAPSHOT.md に「次1h優先」を更新して引き継ぐ
- 連続2回失敗した項目は定型化して自動チェック対象へ移す
